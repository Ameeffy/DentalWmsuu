{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css">
    <title>Dental Dashboard</title>
    <link rel="shortcut icon" type="image/JPG" href="../../static/images/LOGODENTAL.png">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <style>
       
       link[rel="shortcut icon"] {
            border-radius: 50%;
        }
        image {
            border-radius: 50%;
        }
        .Move{
        margin-top: 100px;
        margin-left: 260px;
        margin-right: 10px;
        display: flex;
        justify-content: flex-start;
    }
    .Move1{
        margin-top: 20px;
        margin-left: 260px;
        margin-right: 10px;
        display: flex;
        justify-content: center;
    }
    




    </style>
</head>
<body>
<style>

</style>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <section class="HeaderSection">
        <img src="{% static 'images/OIP1.JPG' %}" alt="logo" class="circular-imgs"> 
        <p>UNIVERSITY HEALTH SERVICES CENTER</p>

        <section class="right" style="display: flex; justify-content: center;"> <p>Welcome to Dental Clinic</p></section>
    </section>
    
    <nav>
        <ul>
           
            <h1 class="gradient-text">Dental Clinic</h1>

            <h4 style="display: flex; justify-content: left; margin-left: 5px; margin-bottom: 0px; font-weight: normal;">General</h4>
            <li><a href="{% url 'admin_Dashboard' %}"><i class="fas fa-columns"></i> Dashboard</a></li>

            <li><a href="{% url 'admin_homesite' %}"><i class="fas fa-clipboard-list"></i> Assessment</a></li>
            <li><a href="{% url 'appointment_list' %}"><i class="far fa-calendar-alt"></i> Appointment</a></li>
            <li><a href="{% url 'dental_record' %}"><i class="fas fa-file-medical"></i> Dental Records</a></li>


            <li style="cursor: pointer;" id="user-toggle"><i class="fas fa-user"> </i> Patient <span class="icon-after"></span></li>

            <li id="student-link" style="display: none;"><a href="{% url 'admin_list' %}"><i class="fas fa-user-graduate"></i> Student</a></li>
            <li id="faculty-staff-link" style="display: none;"><a href="{% url 'admin_listFaculty' %}"><i class="fas fa-users"></i> Faculty & Staff</a></li>
            <li><a href="{% url 'admin_doctorsite' %}"><i class="fas fa-user-md"></i> Dental Staff</a></li>
            
            <li><a href="{% url 'supply_listhome' %}"><i class="fas fa-box"></i> Supplies</a></li>
            
            <li><a href="{% url 'admin_doctoravailability' %}"><i class="far fa-calendar-check"></i> Schedule</a></li>
            <h4 style="display: flex; justify-content: left; margin-left: 5px; margin-bottom: 0px;font-weight: normal;">Settings</h4>
            
            <li><a href="#"><i class="fas fa-question-circle"></i> Help and Support</a></li>
            <li><a href="{% url 'dentalchange_password' %}"><i class="fas fa-cog"></i> Settings</a></li>

            <li>
                <a href="#" class="logout-link">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </a>
            </li>
            
        </ul>
    </nav>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelector('.logout-link').addEventListener('click', function(e) {
                e.preventDefault();
                Swal.fire({
                    title: 'Are you sure you want to logout?',
                    icon: 'warning',
                    showCancelButton: true,
                    confirmButtonColor: '#d33',
                    cancelButtonColor: '#3085d6',
                    confirmButtonText: 'Yes, logout!'
                }).then((result) => {
                    if (result.isConfirmed) {
                        // Redirect to the logout URL
                        window.location.href = "{% url 'LoginDentals' %}";
                    }
                });
            });
        });
        </script>
        
    <style>  .HeaderSection {
        display: flex;
        align-items: center;
        position: fixed;
        top: 1px;
        left: 4px;
        color: white;
        width: calc(100% - 8px); 
        background-color: rgb(44, 41, 41);
        border: 1px solid rgba(255, 248, 248, 0.24);
        
        font-weight: lighter; 
    }
    .right {
        margin-left: auto ; 
        display: flex;
        justify-content: center; 
        align-items: center;
        margin-right: 10px;
    }
    
    .gradient-text {
        font-size: 30px;
        margin-left: 5px;
        margin-right: 5px;
        background: linear-gradient(to right, #fff, #ff0000); 
        -webkit-background-clip: text;
        -moz-background-clip: text;
        background-clip: text; 
        color: transparent; }
        .icon-after {
        margin-left: 5px; /* Adjust margin as needed */
      }
      i {
        margin-right: 5px;
      }
      .circular-imgs {
        border-radius: 50%;
        max-width: 35px;
        height: auto;
        margin-right: 2px;
    }nav {
    margin-top: 50px;
    position: fixed;
    top: 0;
    left: 0;
    max-width: 100%; 
    height: 100%; 
    background-color: rgb(7, 7);
    color: #fff;
    text-align: center;
    z-index: 2;
    font-size: 15px;
    border-right: 1px solid rgba(255, 248, 248, 0.24);
    
    
}


nav ul {
    list-style: none;
    padding: 0;
}

nav ul li {
    display: flex;
    justify-content: left; 
            text-decoration: none;
            color: #fff;
            
            transition: color 0.3s;
            padding: 18px;
            
    transition: background-color 0.3s ease, color 0.3s ease;
    
}

nav ul li a  {
    text-decoration: none;
    color: #fff;
    
    transition: color 0.5s;
   
    
}
nav li:hover{
    color: red;
}
nav ul li a:hover {
    color: red;
}:before,
*:after {
  box-sizing: border-box;
}
body {
  padding: 1em;
  font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
  font-size: 15px;
  color: #b9b9b9;
  background: linear-gradient(to left, rgb(29, 28, 28), rgb(14, 11, 11));
}
    </style>
    
      
    <script>
        document.getElementById('user-toggle').addEventListener('click', function() {
            var studentLink = document.getElementById('student-link');
            var facultyStaffLink = document.getElementById('faculty-staff-link');
            
            if (studentLink.style.display === 'none') {
                studentLink.style.display = 'block';
                facultyStaffLink.style.display = 'block';
            } else {
                studentLink.style.display = 'none';
                facultyStaffLink.style.display = 'none';
            }
        });
        document.getElementById('user-toggle').innerHTML += '<span class="icon-after">></span>';

    </script>
    
    


    <div class="Move">      
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
       

    
        
        <canvas style="border: 1px solid black; border-radius: 8px; margin-right: 10px; padding-left: auto; margin-bottom: 20px; background-color: rgb(44, 41, 41); " id="pie-chart" width="250" height="250"></canvas>
        
        <script>
            var pieChartData = JSON.parse('{{ pie_chart_data|escapejs }}');
            
            var ctxPie = document.getElementById('pie-chart').getContext('2d');
            
            var pieChart = new Chart(ctxPie, {
                type: 'bar',
                data: {
                    labels: Object.keys(pieChartData),
                    datasets: [{
                        label: 'Appointment Status',
                        data: Object.values(pieChartData),
                        backgroundColor: [
                            'rgba(255, 206, 86, 0.5)',
                            'rgba(144, 238, 144, 0.5)',
                            'rgba(255, 99, 71, 0.5)',
                            'rgba(255, 0, 0, 0.5)',
                        ],
                        borderColor: [
                            'rgba(255, 206, 86, 1)',
                            'rgba(144, 238, 144, 1)',
                            'rgba(255, 99, 71, 1)',
                            'rgba(255, 0, 0, 1)',
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: false,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: {
                                color: 'white' // Set the color of legend labels to white
                            }
                        }
                    },
                    scales: {
                        x: {
                            ticks: {
                                color: 'white' // Set the color of x-axis ticks to white
                            }
                        },
                        y: {
                            ticks: {
                                color: 'white' // Set the color of y-axis ticks to white
                            }
                        }
                    }
                }
            });
        </script>
        
            <canvas style="border: 1px solid black;border-radius: 8px; margin-right: 10px;background-color: rgb(44, 41, 41); " id="appointment-bar-chart" width="250" height="250"></canvas>

            <script>
                var appointmentBarChartData = JSON.parse('{{ appointment_bar_chart_json|escapejs }}');
            
                var ctxAppointmentBar = document.getElementById('appointment-bar-chart').getContext('2d');
            
                var appointmentBarChart = new Chart(ctxAppointmentBar, {
                    type: 'bar',
                    data: {
                        labels: Object.keys(appointmentBarChartData),
                        datasets: [{
                            label: 'Appointment Purpose',
                            data: Object.values(appointmentBarChartData),
                            backgroundColor: [
                                'rgba(255, 206, 86, 0.5)',
                                'rgba(144, 238, 144, 0.5)',
                                'rgba(255, 99, 71, 0.5)',
                            ],
                            borderColor: [
                                'rgba(255, 206, 86, 1)',
                                'rgba(144, 238, 144, 1)',
                                'rgba(255, 99, 71, 1)',
                            ],
                            borderWidth: 1
                        }]
                    },
                    options: {
            responsive: false,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    labels: {
                        color: 'white' // Set the color of legend labels to white
                    }
                }
            },
            scales: {
                x: {
                    ticks: {
                        color: 'white' // Set the color of x-axis ticks to white
                    }
                },
                y: {
                    ticks: {
                        color: 'white' // Set the color of y-axis ticks to white
                    }
                }
            }
        }
    });
            </script>
            
        
        
   
</div>
<div class="Move1">
    <canvas style="border: 1px solid black;border-radius: 8px; padding-bottom: 10px;background-color: rgb(44, 41, 41); " id="total-appointments-chart" width="800" height="500"></canvas>
</div>
<script>
    var ctxTotalAppointments = document.getElementById('total-appointments-chart').getContext('2d');
    var totalAppointmentsData = JSON.parse('{{ total_appointments_data|escapejs }}');

    // Months mapping
    var monthNames = ["January", "February", "March", "April", "May", "June",
                      "July", "August", "September", "October", "November", "December"];

    // Combine months and years and sort them chronologically
    var combinedDates = totalAppointmentsData.months.map((month, index) => ({ month, year: totalAppointmentsData.years[index] }));
    combinedDates.sort((a, b) => {
        return new Date(a.year, a.month - 1) - new Date(b.year, b.month - 1);
    });

    // Extract sorted months and years, convert numerical months to month names
    var sortedMonths = combinedDates.map(date => monthNames[date.month - 1] + ' ' + date.year);
    var sortedCounts = combinedDates.map(date => totalAppointmentsData.counts[
        totalAppointmentsData.months.indexOf(date.month) // Find the index of the month
    ]);

    var totalAppointmentsChart = new Chart(ctxTotalAppointments, {
        type: 'line',
        data: {
            labels: sortedMonths,
            datasets: [{
                label: 'Total Appointments',
                data: sortedCounts,
                backgroundColor: 'rgba(255, 99, 132, 0.5)',
                borderColor: 'rgba(255, 99, 132, 1)',
                borderWidth: 1
            }]
        },
        options: {
            responsive: false,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    labels: {
                        color: 'white' // Set the color of legend labels to white
                    }
                }
            },
            scales: {
                x: {
                    ticks: {
                        color: 'white' // Set the color of x-axis ticks to white
                    }
                },
                y: {
                    ticks: {
                        color: 'white' // Set the color of y-axis ticks to white
                    },
                    beginAtZero: true // Start y-axis at zero
                }
            }
        }
    });
</script>








</div>
<style> 
 
.logout-link {
    color: red;
    text-decoration: none; 
}

.logout-link:hover {
    color: darkred;
}










</style>
</body>
</html>
